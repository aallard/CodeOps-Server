openapi: 3.0.3
info:
  title: CodeOps Server API
  description: |
    Cloud backend for CodeOps, an AI-powered software maintenance platform.
    Spring Boot 3.3, Java 21, PostgreSQL.
  version: 1.0.0
  contact:
    name: CodeOps Team

servers:
  - url: http://localhost:8090
    description: Local development server

security:
  - bearerAuth: []

tags:
  - name: Admin
    description: Administrative operations (user management, audit logs, system settings)
  - name: Auth
    description: Authentication and MFA operations
  - name: Compliance
    description: Compliance specifications and items
  - name: Dependencies
    description: Dependency scanning and vulnerability tracking
  - name: Directives
    description: Coding directives and project assignments
  - name: Findings
    description: Code review findings management
  - name: HealthMonitor
    description: Health monitoring schedules and snapshots
  - name: Integrations
    description: GitHub and Jira connection management
  - name: Jobs
    description: Job lifecycle, agent runs, and bug investigations
  - name: Metrics
    description: Project and team metrics
  - name: Personas
    description: AI agent persona management
  - name: Projects
    description: Project CRUD and archival
  - name: Reports
    description: Report and specification upload/download
  - name: Tasks
    description: Task management for jobs
  - name: Teams
    description: Team management, members, and invitations
  - name: TechDebt
    description: Technical debt tracking
  - name: Users
    description: User profile and management

paths:
  # ============================================================
  # AdminController (/api/v1/admin)
  # ============================================================
  /api/v1/admin/users:
    get:
      tags: [Admin]
      operationId: getAllUsers
      summary: Get all users (admin only)
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Paginated list of users
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResponseUserResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'

  /api/v1/admin/users/{userId}:
    put:
      tags: [Admin]
      operationId: updateUserStatus
      summary: Update user active status (admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminUpdateUserRequest'
      responses:
        '200':
          description: Updated user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/admin/audit-logs/team/{teamId}:
    get:
      tags: [Admin]
      operationId: getAuditLogs
      summary: Get audit logs for a team
      security:
        - bearerAuth: []
      parameters:
        - name: teamId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Paginated audit logs
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResponseAuditLogResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/admin/audit-logs/user/{userId}:
    get:
      tags: [Admin]
      operationId: getUserAuditLogs
      summary: Get audit logs for a user
      security:
        - bearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Paginated audit logs
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResponseAuditLogResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/admin/audit-logs/entity/{entityType}/{entityId}:
    get:
      tags: [Admin]
      operationId: getEntityAuditLogs
      summary: Get audit logs for a specific entity
      security:
        - bearerAuth: []
      parameters:
        - name: entityType
          in: path
          required: true
          schema:
            type: string
        - name: entityId
          in: path
          required: true
          schema:
            type: string
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Paginated audit logs
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResponseAuditLogResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/admin/settings/{key}:
    get:
      tags: [Admin]
      operationId: getSystemSetting
      summary: Get a system setting by key (admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: key
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: System setting value
          content:
            application/json:
              schema:
                type: object
                additionalProperties: true
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/admin/settings:
    put:
      tags: [Admin]
      operationId: updateSystemSetting
      summary: Update a system setting (admin only)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateSystemSettingRequest'
      responses:
        '200':
          description: Updated system setting
          content:
            application/json:
              schema:
                type: object
                additionalProperties: true
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'

  # ============================================================
  # AuthController (/api/v1/auth)
  # ============================================================
  /api/v1/auth/register:
    post:
      tags: [Auth]
      operationId: register
      summary: Register a new user
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
      responses:
        '201':
          description: User registered successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '400':
          $ref: '#/components/responses/BadRequest'

  /api/v1/auth/login:
    post:
      tags: [Auth]
      operationId: login
      summary: Authenticate user
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: Login successful (or MFA challenge issued)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/auth/refresh:
    post:
      tags: [Auth]
      operationId: refresh
      summary: Refresh access token
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RefreshTokenRequest'
      responses:
        '200':
          description: Token refreshed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/auth/logout:
    post:
      tags: [Auth]
      operationId: logout
      summary: Logout and invalidate token
      security:
        - bearerAuth: []
      responses:
        '204':
          description: Logged out successfully
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/auth/change-password:
    post:
      tags: [Auth]
      operationId: changePassword
      summary: Change current user password
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChangePasswordRequest'
      responses:
        '200':
          description: Password changed successfully
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/auth/mfa/setup:
    post:
      tags: [Auth]
      operationId: setupMfa
      summary: Setup TOTP MFA
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MfaSetupRequest'
      responses:
        '200':
          description: MFA setup initiated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MfaSetupResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/auth/mfa/verify:
    post:
      tags: [Auth]
      operationId: verifyMfa
      summary: Verify MFA setup with TOTP code
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MfaVerifyRequest'
      responses:
        '200':
          description: MFA verified and enabled
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MfaStatusResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/auth/mfa/login:
    post:
      tags: [Auth]
      operationId: mfaLogin
      summary: Complete login with MFA code
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MfaLoginRequest'
      responses:
        '200':
          description: MFA login successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/auth/mfa/disable:
    post:
      tags: [Auth]
      operationId: disableMfa
      summary: Disable MFA
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MfaSetupRequest'
      responses:
        '200':
          description: MFA disabled
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MfaStatusResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/auth/mfa/recovery-codes:
    post:
      tags: [Auth]
      operationId: regenerateRecoveryCodes
      summary: Regenerate MFA recovery codes
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MfaSetupRequest'
      responses:
        '200':
          description: New recovery codes generated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MfaRecoveryResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/auth/mfa/status:
    get:
      tags: [Auth]
      operationId: getMfaStatus
      summary: Get current MFA status
      security:
        - bearerAuth: []
      responses:
        '200':
          description: MFA status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MfaStatusResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/auth/mfa/setup/email:
    post:
      tags: [Auth]
      operationId: setupEmailMfa
      summary: Setup email-based MFA
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MfaEmailSetupRequest'
      responses:
        '200':
          description: Email MFA setup initiated, recovery codes returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MfaRecoveryResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/auth/mfa/verify-setup/email:
    post:
      tags: [Auth]
      operationId: verifyEmailSetup
      summary: Verify email MFA setup with code
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MfaVerifyRequest'
      responses:
        '200':
          description: Email MFA verified and enabled
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MfaStatusResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/auth/mfa/resend:
    post:
      tags: [Auth]
      operationId: resendMfaCode
      summary: Resend MFA code (for email MFA)
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MfaResendRequest'
      responses:
        '200':
          description: MFA code resent
        '400':
          $ref: '#/components/responses/BadRequest'

  # ============================================================
  # ComplianceController (/api/v1/compliance)
  # ============================================================
  /api/v1/compliance/specs:
    post:
      tags: [Compliance]
      operationId: createSpecification
      summary: Create a compliance specification
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSpecificationRequest'
      responses:
        '201':
          description: Specification created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SpecificationResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/compliance/specs/job/{jobId}:
    get:
      tags: [Compliance]
      operationId: getSpecificationsForJob
      summary: Get specifications for a job
      security:
        - bearerAuth: []
      parameters:
        - name: jobId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Paginated specifications
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResponseSpecificationResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/compliance/items:
    post:
      tags: [Compliance]
      operationId: createComplianceItem
      summary: Create a compliance item
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateComplianceItemRequest'
      responses:
        '201':
          description: Compliance item created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ComplianceItemResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/compliance/items/batch:
    post:
      tags: [Compliance]
      operationId: createComplianceItems
      summary: Create multiple compliance items
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/CreateComplianceItemRequest'
      responses:
        '201':
          description: Compliance items created
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ComplianceItemResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/compliance/items/job/{jobId}:
    get:
      tags: [Compliance]
      operationId: getComplianceItemsForJob
      summary: Get compliance items for a job
      security:
        - bearerAuth: []
      parameters:
        - name: jobId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Paginated compliance items
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResponseComplianceItemResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/compliance/items/job/{jobId}/status/{status}:
    get:
      tags: [Compliance]
      operationId: getComplianceItemsByStatus
      summary: Get compliance items by status for a job
      security:
        - bearerAuth: []
      parameters:
        - name: jobId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: status
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/ComplianceStatus'
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Paginated compliance items filtered by status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResponseComplianceItemResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/compliance/summary/job/{jobId}:
    get:
      tags: [Compliance]
      operationId: getComplianceSummary
      summary: Get compliance summary for a job
      security:
        - bearerAuth: []
      parameters:
        - name: jobId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Compliance summary
          content:
            application/json:
              schema:
                type: object
                additionalProperties: true
        '401':
          $ref: '#/components/responses/Unauthorized'

  # ============================================================
  # DependencyController (/api/v1/dependencies)
  # ============================================================
  /api/v1/dependencies/scans:
    post:
      tags: [Dependencies]
      operationId: createScan
      summary: Create a dependency scan
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateDependencyScanRequest'
      responses:
        '201':
          description: Dependency scan created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DependencyScanResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/dependencies/scans/{scanId}:
    get:
      tags: [Dependencies]
      operationId: getScan
      summary: Get a dependency scan by ID
      security:
        - bearerAuth: []
      parameters:
        - name: scanId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Dependency scan details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DependencyScanResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/dependencies/scans/project/{projectId}:
    get:
      tags: [Dependencies]
      operationId: getScansForProject
      summary: Get dependency scans for a project
      security:
        - bearerAuth: []
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Paginated dependency scans
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResponseDependencyScanResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/dependencies/scans/project/{projectId}/latest:
    get:
      tags: [Dependencies]
      operationId: getLatestScan
      summary: Get the latest dependency scan for a project
      security:
        - bearerAuth: []
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Latest dependency scan
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DependencyScanResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/dependencies/vulnerabilities:
    post:
      tags: [Dependencies]
      operationId: addVulnerability
      summary: Add a vulnerability to a scan
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateVulnerabilityRequest'
      responses:
        '201':
          description: Vulnerability added
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VulnerabilityResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/dependencies/vulnerabilities/batch:
    post:
      tags: [Dependencies]
      operationId: addVulnerabilities
      summary: Add multiple vulnerabilities to a scan
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/CreateVulnerabilityRequest'
      responses:
        '201':
          description: Vulnerabilities added
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/VulnerabilityResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/dependencies/vulnerabilities/scan/{scanId}:
    get:
      tags: [Dependencies]
      operationId: getVulnerabilities
      summary: Get vulnerabilities for a scan
      security:
        - bearerAuth: []
      parameters:
        - name: scanId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Paginated vulnerabilities
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResponseVulnerabilityResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/dependencies/vulnerabilities/scan/{scanId}/severity/{severity}:
    get:
      tags: [Dependencies]
      operationId: getVulnerabilitiesBySeverity
      summary: Get vulnerabilities by severity for a scan
      security:
        - bearerAuth: []
      parameters:
        - name: scanId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: severity
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/Severity'
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Paginated vulnerabilities filtered by severity
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResponseVulnerabilityResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/dependencies/vulnerabilities/scan/{scanId}/open:
    get:
      tags: [Dependencies]
      operationId: getOpenVulnerabilities
      summary: Get open vulnerabilities for a scan
      security:
        - bearerAuth: []
      parameters:
        - name: scanId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Paginated open vulnerabilities
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResponseVulnerabilityResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/dependencies/vulnerabilities/{vulnerabilityId}/status:
    put:
      tags: [Dependencies]
      operationId: updateVulnerabilityStatus
      summary: Update vulnerability status
      security:
        - bearerAuth: []
      parameters:
        - name: vulnerabilityId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: status
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/VulnerabilityStatus'
      responses:
        '200':
          description: Vulnerability status updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VulnerabilityResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  # ============================================================
  # DirectiveController (/api/v1/directives)
  # ============================================================
  /api/v1/directives:
    post:
      tags: [Directives]
      operationId: createDirective
      summary: Create a directive
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateDirectiveRequest'
      responses:
        '201':
          description: Directive created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DirectiveResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/directives/{directiveId}:
    get:
      tags: [Directives]
      operationId: getDirective
      summary: Get a directive by ID
      security:
        - bearerAuth: []
      parameters:
        - name: directiveId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Directive details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DirectiveResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags: [Directives]
      operationId: updateDirective
      summary: Update a directive
      security:
        - bearerAuth: []
      parameters:
        - name: directiveId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateDirectiveRequest'
      responses:
        '200':
          description: Directive updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DirectiveResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags: [Directives]
      operationId: deleteDirective
      summary: Delete a directive
      security:
        - bearerAuth: []
      parameters:
        - name: directiveId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Directive deleted
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/directives/team/{teamId}:
    get:
      tags: [Directives]
      operationId: getDirectivesForTeam
      summary: Get directives for a team
      security:
        - bearerAuth: []
      parameters:
        - name: teamId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: List of directives
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DirectiveResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/directives/project/{projectId}:
    get:
      tags: [Directives]
      operationId: getDirectivesForProject
      summary: Get directives for a project
      security:
        - bearerAuth: []
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: List of directives
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DirectiveResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/directives/assign:
    post:
      tags: [Directives]
      operationId: assignToProject
      summary: Assign a directive to a project
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AssignDirectiveRequest'
      responses:
        '201':
          description: Directive assigned to project
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectDirectiveResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/directives/project/{projectId}/directive/{directiveId}:
    delete:
      tags: [Directives]
      operationId: removeFromProject
      summary: Remove a directive assignment from a project
      security:
        - bearerAuth: []
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: directiveId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Directive removed from project
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/directives/project/{projectId}/assignments:
    get:
      tags: [Directives]
      operationId: getProjectDirectives
      summary: Get all directive assignments for a project
      security:
        - bearerAuth: []
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: List of project directive assignments
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ProjectDirectiveResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/directives/project/{projectId}/enabled:
    get:
      tags: [Directives]
      operationId: getEnabledDirectives
      summary: Get enabled directives for a project
      security:
        - bearerAuth: []
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: List of enabled directives
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DirectiveResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/directives/project/{projectId}/directive/{directiveId}/toggle:
    put:
      tags: [Directives]
      operationId: toggleDirective
      summary: Toggle a directive enabled/disabled for a project
      security:
        - bearerAuth: []
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: directiveId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: enabled
          in: query
          required: true
          schema:
            type: boolean
      responses:
        '200':
          description: Directive toggle updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectDirectiveResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  # ============================================================
  # FindingController (/api/v1/findings)
  # ============================================================
  /api/v1/findings:
    post:
      tags: [Findings]
      operationId: createFinding
      summary: Create a finding
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateFindingRequest'
      responses:
        '201':
          description: Finding created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FindingResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/findings/batch:
    post:
      tags: [Findings]
      operationId: createFindings
      summary: Create multiple findings
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/CreateFindingRequest'
      responses:
        '201':
          description: Findings created
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/FindingResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/findings/{findingId}:
    get:
      tags: [Findings]
      operationId: getFinding
      summary: Get a finding by ID
      security:
        - bearerAuth: []
      parameters:
        - name: findingId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Finding details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FindingResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/findings/job/{jobId}:
    get:
      tags: [Findings]
      operationId: getFindingsForJob
      summary: Get findings for a job
      security:
        - bearerAuth: []
      parameters:
        - name: jobId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Paginated findings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResponseFindingResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/findings/job/{jobId}/severity/{severity}:
    get:
      tags: [Findings]
      operationId: getFindingsBySeverity
      summary: Get findings by severity for a job
      security:
        - bearerAuth: []
      parameters:
        - name: jobId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: severity
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/Severity'
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Paginated findings filtered by severity
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResponseFindingResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/findings/job/{jobId}/agent/{agentType}:
    get:
      tags: [Findings]
      operationId: getFindingsByAgent
      summary: Get findings by agent type for a job
      security:
        - bearerAuth: []
      parameters:
        - name: jobId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: agentType
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/AgentType'
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Paginated findings filtered by agent type
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResponseFindingResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/findings/job/{jobId}/status/{status}:
    get:
      tags: [Findings]
      operationId: getFindingsByStatus
      summary: Get findings by status for a job
      security:
        - bearerAuth: []
      parameters:
        - name: jobId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: status
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/FindingStatus'
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Paginated findings filtered by status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResponseFindingResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/findings/job/{jobId}/counts:
    get:
      tags: [Findings]
      operationId: getSeverityCounts
      summary: Get severity counts for a job
      security:
        - bearerAuth: []
      parameters:
        - name: jobId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Map of severity to count
          content:
            application/json:
              schema:
                type: object
                additionalProperties:
                  type: integer
                  format: int64
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/findings/{findingId}/status:
    put:
      tags: [Findings]
      operationId: updateFindingStatus
      summary: Update a finding status
      security:
        - bearerAuth: []
      parameters:
        - name: findingId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateFindingStatusRequest'
      responses:
        '200':
          description: Finding status updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FindingResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/findings/bulk-status:
    put:
      tags: [Findings]
      operationId: bulkUpdateStatus
      summary: Bulk update finding statuses
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BulkUpdateFindingsRequest'
      responses:
        '200':
          description: Findings updated
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/FindingResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  # ============================================================
  # HealthMonitorController (/api/v1/health-monitor)
  # ============================================================
  /api/v1/health-monitor/schedules:
    post:
      tags: [HealthMonitor]
      operationId: createSchedule
      summary: Create a health monitoring schedule
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateHealthScheduleRequest'
      responses:
        '201':
          description: Schedule created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthScheduleResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/health-monitor/schedules/project/{projectId}:
    get:
      tags: [HealthMonitor]
      operationId: getSchedulesForProject
      summary: Get health schedules for a project
      security:
        - bearerAuth: []
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: List of health schedules
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/HealthScheduleResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/health-monitor/schedules/{scheduleId}:
    put:
      tags: [HealthMonitor]
      operationId: updateSchedule
      summary: Activate or deactivate a schedule
      security:
        - bearerAuth: []
      parameters:
        - name: scheduleId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: active
          in: query
          required: true
          schema:
            type: boolean
      responses:
        '200':
          description: Schedule updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthScheduleResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags: [HealthMonitor]
      operationId: deleteSchedule
      summary: Delete a health schedule
      security:
        - bearerAuth: []
      parameters:
        - name: scheduleId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Schedule deleted
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/health-monitor/snapshots:
    post:
      tags: [HealthMonitor]
      operationId: createSnapshot
      summary: Create a health snapshot
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateHealthSnapshotRequest'
      responses:
        '201':
          description: Snapshot created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthSnapshotResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/health-monitor/snapshots/project/{projectId}:
    get:
      tags: [HealthMonitor]
      operationId: getSnapshots
      summary: Get health snapshots for a project
      security:
        - bearerAuth: []
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Paginated health snapshots
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResponseHealthSnapshotResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/health-monitor/snapshots/project/{projectId}/latest:
    get:
      tags: [HealthMonitor]
      operationId: getLatestSnapshot
      summary: Get the latest health snapshot for a project
      security:
        - bearerAuth: []
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Latest health snapshot
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthSnapshotResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/health-monitor/snapshots/project/{projectId}/trend:
    get:
      tags: [HealthMonitor]
      operationId: getHealthTrend
      summary: Get health trend snapshots for a project
      security:
        - bearerAuth: []
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: List of health snapshots showing trend
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/HealthSnapshotResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  # ============================================================
  # IntegrationController (/api/v1/integrations)
  # ============================================================
  /api/v1/integrations/github/{teamId}:
    post:
      tags: [Integrations]
      operationId: createGitHubConnection
      summary: Create a GitHub connection for a team
      security:
        - bearerAuth: []
      parameters:
        - name: teamId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateGitHubConnectionRequest'
      responses:
        '201':
          description: GitHub connection created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GitHubConnectionResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
    get:
      tags: [Integrations]
      operationId: getGitHubConnections
      summary: Get GitHub connections for a team
      security:
        - bearerAuth: []
      parameters:
        - name: teamId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: List of GitHub connections
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/GitHubConnectionResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/integrations/github/{teamId}/{connectionId}:
    get:
      tags: [Integrations]
      operationId: getGitHubConnection
      summary: Get a specific GitHub connection
      security:
        - bearerAuth: []
      parameters:
        - name: teamId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: connectionId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: GitHub connection details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GitHubConnectionResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags: [Integrations]
      operationId: deleteGitHubConnection
      summary: Delete a GitHub connection
      security:
        - bearerAuth: []
      parameters:
        - name: teamId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: connectionId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: GitHub connection deleted
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/integrations/jira/{teamId}:
    post:
      tags: [Integrations]
      operationId: createJiraConnection
      summary: Create a Jira connection for a team
      security:
        - bearerAuth: []
      parameters:
        - name: teamId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateJiraConnectionRequest'
      responses:
        '201':
          description: Jira connection created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JiraConnectionResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
    get:
      tags: [Integrations]
      operationId: getJiraConnections
      summary: Get Jira connections for a team
      security:
        - bearerAuth: []
      parameters:
        - name: teamId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: List of Jira connections
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/JiraConnectionResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/integrations/jira/{teamId}/{connectionId}:
    get:
      tags: [Integrations]
      operationId: getJiraConnection
      summary: Get a specific Jira connection
      security:
        - bearerAuth: []
      parameters:
        - name: teamId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: connectionId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Jira connection details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JiraConnectionResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags: [Integrations]
      operationId: deleteJiraConnection
      summary: Delete a Jira connection
      security:
        - bearerAuth: []
      parameters:
        - name: teamId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: connectionId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Jira connection deleted
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  # ============================================================
  # JobController (/api/v1/jobs)
  # ============================================================
  /api/v1/jobs:
    post:
      tags: [Jobs]
      operationId: createJob
      summary: Create a job
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateJobRequest'
      responses:
        '201':
          description: Job created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/jobs/{jobId}:
    get:
      tags: [Jobs]
      operationId: getJob
      summary: Get a job by ID
      security:
        - bearerAuth: []
      parameters:
        - name: jobId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Job details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags: [Jobs]
      operationId: updateJob
      summary: Update a job
      security:
        - bearerAuth: []
      parameters:
        - name: jobId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateJobRequest'
      responses:
        '200':
          description: Job updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags: [Jobs]
      operationId: deleteJob
      summary: Delete a job
      security:
        - bearerAuth: []
      parameters:
        - name: jobId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Job deleted
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/jobs/project/{projectId}:
    get:
      tags: [Jobs]
      operationId: getJobsForProject
      summary: Get jobs for a project
      security:
        - bearerAuth: []
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Paginated job summaries
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResponseJobSummaryResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/jobs/mine:
    get:
      tags: [Jobs]
      operationId: getMyJobs
      summary: Get jobs started by the current user
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Paginated job summaries
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResponseJobSummaryResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/jobs/{jobId}/agents:
    post:
      tags: [Jobs]
      operationId: createAgentRun
      summary: Create an agent run for a job
      security:
        - bearerAuth: []
      parameters:
        - name: jobId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateAgentRunRequest'
      responses:
        '201':
          description: Agent run created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AgentRunResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
    get:
      tags: [Jobs]
      operationId: getAgentRuns
      summary: Get agent runs for a job
      security:
        - bearerAuth: []
      parameters:
        - name: jobId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: List of agent runs
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AgentRunResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/jobs/{jobId}/agents/batch:
    post:
      tags: [Jobs]
      operationId: createAgentRunsBatch
      summary: Create multiple agent runs for a job
      security:
        - bearerAuth: []
      parameters:
        - name: jobId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/AgentType'
      responses:
        '201':
          description: Agent runs created
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AgentRunResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/jobs/agents/{agentRunId}:
    put:
      tags: [Jobs]
      operationId: updateAgentRun
      summary: Update an agent run
      security:
        - bearerAuth: []
      parameters:
        - name: agentRunId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateAgentRunRequest'
      responses:
        '200':
          description: Agent run updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AgentRunResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/jobs/{jobId}/investigation:
    get:
      tags: [Jobs]
      operationId: getInvestigation
      summary: Get bug investigation for a job
      security:
        - bearerAuth: []
      parameters:
        - name: jobId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Bug investigation details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BugInvestigationResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    post:
      tags: [Jobs]
      operationId: createInvestigation
      summary: Create a bug investigation for a job
      security:
        - bearerAuth: []
      parameters:
        - name: jobId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateBugInvestigationRequest'
      responses:
        '201':
          description: Bug investigation created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BugInvestigationResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/jobs/investigations/{investigationId}:
    put:
      tags: [Jobs]
      operationId: updateInvestigation
      summary: Update a bug investigation
      security:
        - bearerAuth: []
      parameters:
        - name: investigationId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateBugInvestigationRequest'
      responses:
        '200':
          description: Bug investigation updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BugInvestigationResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  # ============================================================
  # MetricsController (/api/v1/metrics)
  # ============================================================
  /api/v1/metrics/project/{projectId}:
    get:
      tags: [Metrics]
      operationId: getProjectMetrics
      summary: Get metrics for a project
      security:
        - bearerAuth: []
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Project metrics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectMetricsResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/metrics/team/{teamId}:
    get:
      tags: [Metrics]
      operationId: getTeamMetrics
      summary: Get metrics for a team
      security:
        - bearerAuth: []
      parameters:
        - name: teamId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Team metrics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeamMetricsResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/metrics/project/{projectId}/trend:
    get:
      tags: [Metrics]
      operationId: getMetricsHealthTrend
      summary: Get health trend for a project
      security:
        - bearerAuth: []
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: days
          in: query
          required: false
          schema:
            type: integer
            format: int32
            default: 30
      responses:
        '200':
          description: Health trend snapshots
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/HealthSnapshotResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  # ============================================================
  # PersonaController (/api/v1/personas)
  # ============================================================
  /api/v1/personas:
    post:
      tags: [Personas]
      operationId: createPersona
      summary: Create a persona
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePersonaRequest'
      responses:
        '201':
          description: Persona created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PersonaResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/personas/{personaId}:
    get:
      tags: [Personas]
      operationId: getPersona
      summary: Get a persona by ID
      security:
        - bearerAuth: []
      parameters:
        - name: personaId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Persona details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PersonaResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags: [Personas]
      operationId: updatePersona
      summary: Update a persona
      security:
        - bearerAuth: []
      parameters:
        - name: personaId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatePersonaRequest'
      responses:
        '200':
          description: Persona updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PersonaResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags: [Personas]
      operationId: deletePersona
      summary: Delete a persona
      security:
        - bearerAuth: []
      parameters:
        - name: personaId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Persona deleted
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/personas/team/{teamId}:
    get:
      tags: [Personas]
      operationId: getPersonasForTeam
      summary: Get personas for a team (paginated)
      security:
        - bearerAuth: []
      parameters:
        - name: teamId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Paginated personas
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResponsePersonaResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/personas/team/{teamId}/agent/{agentType}:
    get:
      tags: [Personas]
      operationId: getPersonasByAgentType
      summary: Get personas by agent type for a team
      security:
        - bearerAuth: []
      parameters:
        - name: teamId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: agentType
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/AgentType'
      responses:
        '200':
          description: List of personas for agent type
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PersonaResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/personas/team/{teamId}/default/{agentType}:
    get:
      tags: [Personas]
      operationId: getDefaultPersona
      summary: Get default persona for an agent type in a team
      security:
        - bearerAuth: []
      parameters:
        - name: teamId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: agentType
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/AgentType'
      responses:
        '200':
          description: Default persona
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PersonaResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/personas/mine:
    get:
      tags: [Personas]
      operationId: getMyPersonas
      summary: Get personas created by the current user
      security:
        - bearerAuth: []
      responses:
        '200':
          description: List of user personas
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PersonaResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/personas/system:
    get:
      tags: [Personas]
      operationId: getSystemPersonas
      summary: Get system personas
      security:
        - bearerAuth: []
      responses:
        '200':
          description: List of system personas
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PersonaResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/personas/{personaId}/set-default:
    put:
      tags: [Personas]
      operationId: setAsDefault
      summary: Set a persona as default for its agent type
      security:
        - bearerAuth: []
      parameters:
        - name: personaId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Persona set as default
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PersonaResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/personas/{personaId}/remove-default:
    put:
      tags: [Personas]
      operationId: removeDefault
      summary: Remove default status from a persona
      security:
        - bearerAuth: []
      parameters:
        - name: personaId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Default status removed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PersonaResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  # ============================================================
  # ProjectController (/api/v1/projects)
  # ============================================================
  /api/v1/projects/{teamId}:
    post:
      tags: [Projects]
      operationId: createProject
      summary: Create a project in a team
      security:
        - bearerAuth: []
      parameters:
        - name: teamId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateProjectRequest'
      responses:
        '201':
          description: Project created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/projects/team/{teamId}:
    get:
      tags: [Projects]
      operationId: getProjects
      summary: Get projects for a team
      security:
        - bearerAuth: []
      parameters:
        - name: teamId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Paginated projects
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResponseProjectResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/projects/{projectId}:
    get:
      tags: [Projects]
      operationId: getProject
      summary: Get a project by ID
      security:
        - bearerAuth: []
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Project details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags: [Projects]
      operationId: updateProject
      summary: Update a project
      security:
        - bearerAuth: []
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProjectRequest'
      responses:
        '200':
          description: Project updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags: [Projects]
      operationId: deleteProject
      summary: Delete a project
      security:
        - bearerAuth: []
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Project deleted
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/projects/{projectId}/archive:
    put:
      tags: [Projects]
      operationId: archiveProject
      summary: Archive a project
      security:
        - bearerAuth: []
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Project archived
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/projects/{projectId}/unarchive:
    put:
      tags: [Projects]
      operationId: unarchiveProject
      summary: Unarchive a project
      security:
        - bearerAuth: []
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Project unarchived
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  # ============================================================
  # ReportController (/api/v1/reports)
  # ============================================================
  /api/v1/reports/job/{jobId}/agent/{agentType}:
    post:
      tags: [Reports]
      operationId: uploadAgentReport
      summary: Upload an agent report (markdown)
      security:
        - bearerAuth: []
      parameters:
        - name: jobId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: agentType
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/AgentType'
      requestBody:
        required: true
        content:
          text/markdown:
            schema:
              type: string
      responses:
        '201':
          description: Report uploaded
          content:
            application/json:
              schema:
                type: object
                properties:
                  s3Key:
                    type: string
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/reports/job/{jobId}/summary:
    post:
      tags: [Reports]
      operationId: uploadSummaryReport
      summary: Upload a summary report (markdown)
      security:
        - bearerAuth: []
      parameters:
        - name: jobId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          text/markdown:
            schema:
              type: string
      responses:
        '201':
          description: Summary report uploaded
          content:
            application/json:
              schema:
                type: object
                properties:
                  s3Key:
                    type: string
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/reports/download:
    get:
      tags: [Reports]
      operationId: downloadReport
      summary: Download a report by S3 key
      security:
        - bearerAuth: []
      parameters:
        - name: s3Key
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Report content
          content:
            text/markdown:
              schema:
                type: string
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/reports/job/{jobId}/spec:
    post:
      tags: [Reports]
      operationId: uploadSpecification
      summary: Upload a specification file
      security:
        - bearerAuth: []
      parameters:
        - name: jobId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        '201':
          description: Specification uploaded
          content:
            application/json:
              schema:
                type: object
                properties:
                  s3Key:
                    type: string
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/reports/spec/download:
    get:
      tags: [Reports]
      operationId: downloadSpecification
      summary: Download a specification file by S3 key
      security:
        - bearerAuth: []
      parameters:
        - name: s3Key
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Specification file content
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  # ============================================================
  # TaskController (/api/v1/tasks)
  # ============================================================
  /api/v1/tasks:
    post:
      tags: [Tasks]
      operationId: createTask
      summary: Create a task
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateTaskRequest'
      responses:
        '201':
          description: Task created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TaskResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/tasks/batch:
    post:
      tags: [Tasks]
      operationId: createTasks
      summary: Create multiple tasks
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/CreateTaskRequest'
      responses:
        '201':
          description: Tasks created
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/TaskResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/tasks/job/{jobId}:
    get:
      tags: [Tasks]
      operationId: getTasksForJob
      summary: Get tasks for a job
      security:
        - bearerAuth: []
      parameters:
        - name: jobId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Paginated tasks
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResponseTaskResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/tasks/{taskId}:
    get:
      tags: [Tasks]
      operationId: getTask
      summary: Get a task by ID
      security:
        - bearerAuth: []
      parameters:
        - name: taskId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Task details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TaskResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags: [Tasks]
      operationId: updateTask
      summary: Update a task
      security:
        - bearerAuth: []
      parameters:
        - name: taskId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateTaskRequest'
      responses:
        '200':
          description: Task updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TaskResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/tasks/assigned-to-me:
    get:
      tags: [Tasks]
      operationId: getAssignedTasks
      summary: Get tasks assigned to the current user
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Paginated assigned tasks
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResponseTaskResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  # ============================================================
  # TeamController (/api/v1/teams)
  # ============================================================
  /api/v1/teams:
    post:
      tags: [Teams]
      operationId: createTeam
      summary: Create a team
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateTeamRequest'
      responses:
        '201':
          description: Team created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeamResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
    get:
      tags: [Teams]
      operationId: getTeams
      summary: Get all teams for the current user
      security:
        - bearerAuth: []
      responses:
        '200':
          description: List of teams
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/TeamResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/teams/{teamId}:
    get:
      tags: [Teams]
      operationId: getTeam
      summary: Get a team by ID
      security:
        - bearerAuth: []
      parameters:
        - name: teamId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Team details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeamResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags: [Teams]
      operationId: updateTeam
      summary: Update a team
      security:
        - bearerAuth: []
      parameters:
        - name: teamId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateTeamRequest'
      responses:
        '200':
          description: Team updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeamResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags: [Teams]
      operationId: deleteTeam
      summary: Delete a team
      security:
        - bearerAuth: []
      parameters:
        - name: teamId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Team deleted
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/teams/{teamId}/members:
    get:
      tags: [Teams]
      operationId: getTeamMembers
      summary: Get team members
      security:
        - bearerAuth: []
      parameters:
        - name: teamId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: List of team members
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/TeamMemberResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/teams/{teamId}/members/{userId}/role:
    put:
      tags: [Teams]
      operationId: updateMemberRole
      summary: Update a team member role
      security:
        - bearerAuth: []
      parameters:
        - name: teamId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: userId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateMemberRoleRequest'
      responses:
        '200':
          description: Member role updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeamMemberResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/teams/{teamId}/members/{userId}:
    delete:
      tags: [Teams]
      operationId: removeMember
      summary: Remove a member from a team
      security:
        - bearerAuth: []
      parameters:
        - name: teamId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: userId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Member removed
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/teams/{teamId}/invitations:
    post:
      tags: [Teams]
      operationId: inviteMember
      summary: Invite a member to a team
      security:
        - bearerAuth: []
      parameters:
        - name: teamId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InviteMemberRequest'
      responses:
        '201':
          description: Invitation sent
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InvitationResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
    get:
      tags: [Teams]
      operationId: getTeamInvitations
      summary: Get pending invitations for a team
      security:
        - bearerAuth: []
      parameters:
        - name: teamId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: List of invitations
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/InvitationResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/teams/{teamId}/invitations/{invitationId}:
    delete:
      tags: [Teams]
      operationId: cancelInvitation
      summary: Cancel a team invitation
      security:
        - bearerAuth: []
      parameters:
        - name: teamId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: invitationId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Invitation cancelled
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/teams/invitations/{token}/accept:
    post:
      tags: [Teams]
      operationId: acceptInvitation
      summary: Accept a team invitation
      security:
        - bearerAuth: []
      parameters:
        - name: token
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Invitation accepted, returns team
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeamResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  # ============================================================
  # TechDebtController (/api/v1/tech-debt)
  # ============================================================
  /api/v1/tech-debt:
    post:
      tags: [TechDebt]
      operationId: createTechDebtItem
      summary: Create a tech debt item
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateTechDebtItemRequest'
      responses:
        '201':
          description: Tech debt item created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TechDebtItemResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/tech-debt/batch:
    post:
      tags: [TechDebt]
      operationId: createTechDebtItems
      summary: Create multiple tech debt items
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/CreateTechDebtItemRequest'
      responses:
        '201':
          description: Tech debt items created
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/TechDebtItemResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/tech-debt/{itemId}:
    get:
      tags: [TechDebt]
      operationId: getTechDebtItem
      summary: Get a tech debt item by ID
      security:
        - bearerAuth: []
      parameters:
        - name: itemId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Tech debt item details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TechDebtItemResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags: [TechDebt]
      operationId: deleteTechDebtItem
      summary: Delete a tech debt item
      security:
        - bearerAuth: []
      parameters:
        - name: itemId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Tech debt item deleted
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/tech-debt/project/{projectId}:
    get:
      tags: [TechDebt]
      operationId: getTechDebtForProject
      summary: Get tech debt items for a project
      security:
        - bearerAuth: []
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Paginated tech debt items
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResponseTechDebtItemResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/tech-debt/project/{projectId}/status/{status}:
    get:
      tags: [TechDebt]
      operationId: getTechDebtByStatus
      summary: Get tech debt items by status for a project
      security:
        - bearerAuth: []
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: status
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/DebtStatus'
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Paginated tech debt items filtered by status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResponseTechDebtItemResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/tech-debt/project/{projectId}/category/{category}:
    get:
      tags: [TechDebt]
      operationId: getTechDebtByCategory
      summary: Get tech debt items by category for a project
      security:
        - bearerAuth: []
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: category
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/DebtCategory'
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Paginated tech debt items filtered by category
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResponseTechDebtItemResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/tech-debt/{itemId}/status:
    put:
      tags: [TechDebt]
      operationId: updateTechDebtStatus
      summary: Update tech debt item status
      security:
        - bearerAuth: []
      parameters:
        - name: itemId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateTechDebtStatusRequest'
      responses:
        '200':
          description: Tech debt status updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TechDebtItemResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/tech-debt/project/{projectId}/summary:
    get:
      tags: [TechDebt]
      operationId: getDebtSummary
      summary: Get tech debt summary for a project
      security:
        - bearerAuth: []
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Tech debt summary
          content:
            application/json:
              schema:
                type: object
                additionalProperties: true
        '401':
          $ref: '#/components/responses/Unauthorized'

  # ============================================================
  # UserController (/api/v1/users)
  # ============================================================
  /api/v1/users/me:
    get:
      tags: [Users]
      operationId: getCurrentUser
      summary: Get current authenticated user
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Current user details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/users/{id}:
    get:
      tags: [Users]
      operationId: getUserById
      summary: Get a user by ID
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: User details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags: [Users]
      operationId: updateUser
      summary: Update a user profile
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserRequest'
      responses:
        '200':
          description: User updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/users/search:
    get:
      tags: [Users]
      operationId: searchUsers
      summary: Search users by query
      security:
        - bearerAuth: []
      parameters:
        - name: q
          in: query
          required: true
          schema:
            type: string
            minLength: 2
            maxLength: 100
      responses:
        '200':
          description: List of matching users
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/UserResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /api/v1/users/{id}/deactivate:
    put:
      tags: [Users]
      operationId: deactivateUser
      summary: Deactivate a user (admin/owner only)
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: User deactivated
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/users/{id}/activate:
    put:
      tags: [Users]
      operationId: activateUser
      summary: Activate a user (admin/owner only)
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: User activated
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

# ================================================================
# COMPONENTS
# ================================================================
components:
  # ============================================================
  # Security Schemes
  # ============================================================
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT access token (HS256, 24h expiry)

  # ============================================================
  # Reusable Parameters
  # ============================================================
  parameters:
    PageParam:
      name: page
      in: query
      required: false
      schema:
        type: integer
        format: int32
        default: 0
      description: Page number (0-indexed)
    SizeParam:
      name: size
      in: query
      required: false
      schema:
        type: integer
        format: int32
        default: 20
      description: Page size

  # ============================================================
  # Reusable Responses
  # ============================================================
  responses:
    BadRequest:
      description: Bad request (validation error or malformed input)
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    Unauthorized:
      description: Unauthorized (missing or invalid token)
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    Forbidden:
      description: Forbidden (insufficient permissions)
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    NotFound:
      description: Resource not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'

  # ============================================================
  # Schemas
  # ============================================================
  schemas:
    # --------------------------------------------------------
    # Error Response
    # --------------------------------------------------------
    ErrorResponse:
      type: object
      properties:
        status:
          type: integer
          format: int32
        message:
          type: string

    # --------------------------------------------------------
    # Enums
    # --------------------------------------------------------
    Severity:
      type: string
      enum: [CRITICAL, HIGH, MEDIUM, LOW]

    AgentType:
      type: string
      enum: [CODE_REVIEW, SECURITY, PERFORMANCE, MAINTAINABILITY, TESTING, ARCHITECTURE]

    AgentStatus:
      type: string
      enum: [PENDING, RUNNING, COMPLETED, FAILED, CANCELLED]

    AgentResult:
      type: string
      enum: [SUCCESS, PARTIAL_SUCCESS, FAILURE]

    FindingStatus:
      type: string
      enum: [OPEN, IN_PROGRESS, RESOLVED, IGNORED]

    JobStatus:
      type: string
      enum: [PENDING, RUNNING, COMPLETED, FAILED, CANCELLED]

    JobMode:
      type: string
      enum: [FULL, INCREMENTAL, TARGETED]

    JobResult:
      type: string
      enum: [SUCCESS, PARTIAL_SUCCESS, FAILURE]

    TaskStatus:
      type: string
      enum: [OPEN, IN_PROGRESS, COMPLETED, BLOCKED]

    TeamRole:
      type: string
      enum: [OWNER, ADMIN, MEMBER, VIEWER]

    DebtStatus:
      type: string
      enum: [IDENTIFIED, IN_PROGRESS, RESOLVED, ACCEPTED]

    DebtCategory:
      type: string
      enum: [CODE_SMELL, ARCHITECTURE, DEPENDENCY, DOCUMENTATION]

    ComplianceStatus:
      type: string
      enum: [PASS, FAIL, NOT_APPLICABLE, PENDING]

    VulnerabilityStatus:
      type: string
      enum: [OPEN, RESOLVED, IGNORED]

    DirectiveScope:
      type: string
      enum: [SYSTEM, TEAM, PROJECT]

    DirectiveCategory:
      type: string
      enum: [CODING_STANDARDS, SECURITY, PERFORMANCE, TESTING, ARCHITECTURE, DOCUMENTATION]

    Scope:
      type: string
      enum: [SYSTEM, TEAM, USER]

    Priority:
      type: string
      enum: [LOW, MEDIUM, HIGH, CRITICAL]

    Effort:
      type: string
      enum: [TRIVIAL, SMALL, MEDIUM, LARGE, XLARGE]

    BusinessImpact:
      type: string
      enum: [NONE, LOW, MEDIUM, HIGH, CRITICAL]

    ScheduleType:
      type: string
      enum: [CRON, DAILY, WEEKLY]

    SpecType:
      type: string
      enum: [REQUIREMENTS, ARCHITECTURE, API, DATABASE, SECURITY, PERFORMANCE]

    InvitationStatus:
      type: string
      enum: [PENDING, ACCEPTED, REJECTED, EXPIRED]

    GitHubAuthType:
      type: string
      enum: [PERSONAL_TOKEN, OAUTH]

    MfaMethod:
      type: string
      enum: [TOTP, EMAIL]

    # --------------------------------------------------------
    # Auth Request DTOs
    # --------------------------------------------------------
    RegisterRequest:
      type: object
      required: [email, password, displayName]
      properties:
        email:
          type: string
          format: email
        password:
          type: string
        displayName:
          type: string
          maxLength: 100

    LoginRequest:
      type: object
      required: [email, password]
      properties:
        email:
          type: string
          format: email
        password:
          type: string

    RefreshTokenRequest:
      type: object
      required: [refreshToken]
      properties:
        refreshToken:
          type: string

    ChangePasswordRequest:
      type: object
      required: [currentPassword, newPassword]
      properties:
        currentPassword:
          type: string
        newPassword:
          type: string
          minLength: 8

    MfaSetupRequest:
      type: object
      required: [password]
      properties:
        password:
          type: string

    MfaVerifyRequest:
      type: object
      required: [code]
      properties:
        code:
          type: string

    MfaLoginRequest:
      type: object
      required: [challengeToken, code]
      properties:
        challengeToken:
          type: string
        code:
          type: string

    MfaEmailSetupRequest:
      type: object
      required: [password]
      properties:
        password:
          type: string

    MfaResendRequest:
      type: object
      required: [challengeToken]
      properties:
        challengeToken:
          type: string

    # --------------------------------------------------------
    # Auth Response DTOs
    # --------------------------------------------------------
    AuthResponse:
      type: object
      properties:
        token:
          type: string
        refreshToken:
          type: string
        user:
          $ref: '#/components/schemas/UserResponse'
        mfaRequired:
          type: boolean
        mfaChallengeToken:
          type: string
        maskedEmail:
          type: string

    MfaSetupResponse:
      type: object
      properties:
        secret:
          type: string
        qrCodeUri:
          type: string
        recoveryCodes:
          type: array
          items:
            type: string

    MfaStatusResponse:
      type: object
      properties:
        mfaEnabled:
          type: boolean
        mfaMethod:
          type: string
        recoveryCodesRemaining:
          type: integer
          format: int32

    MfaRecoveryResponse:
      type: object
      properties:
        recoveryCodes:
          type: array
          items:
            type: string

    # --------------------------------------------------------
    # Admin Request DTOs
    # --------------------------------------------------------
    AdminUpdateUserRequest:
      type: object
      properties:
        isActive:
          type: boolean

    UpdateSystemSettingRequest:
      type: object
      required: [key, value]
      properties:
        key:
          type: string
          maxLength: 200
        value:
          type: string
          maxLength: 5000

    # --------------------------------------------------------
    # Admin Response DTOs
    # --------------------------------------------------------
    AuditLogResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
        action:
          type: string
        entityType:
          type: string
        entityId:
          type: string
        userId:
          type: string
          format: uuid
        teamId:
          type: string
          format: uuid
        details:
          type: string
        ipAddress:
          type: string
        timestamp:
          type: string
          format: date-time

    # --------------------------------------------------------
    # Team Request DTOs
    # --------------------------------------------------------
    CreateTeamRequest:
      type: object
      required: [name]
      properties:
        name:
          type: string
          maxLength: 100
        description:
          type: string
          maxLength: 5000
        teamsWebhookUrl:
          type: string
          maxLength: 500

    UpdateTeamRequest:
      type: object
      properties:
        name:
          type: string
          maxLength: 100
        description:
          type: string
          maxLength: 5000
        teamsWebhookUrl:
          type: string
          maxLength: 500

    InviteMemberRequest:
      type: object
      required: [email, role]
      properties:
        email:
          type: string
          format: email
        role:
          $ref: '#/components/schemas/TeamRole'

    UpdateMemberRoleRequest:
      type: object
      required: [role]
      properties:
        role:
          $ref: '#/components/schemas/TeamRole'

    # --------------------------------------------------------
    # Team Response DTOs
    # --------------------------------------------------------
    TeamResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        description:
          type: string
        ownerId:
          type: string
          format: uuid
        ownerName:
          type: string
        teamsWebhookUrl:
          type: string
        memberCount:
          type: integer
          format: int32
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    TeamMemberResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        userId:
          type: string
          format: uuid
        displayName:
          type: string
        email:
          type: string
        avatarUrl:
          type: string
        role:
          $ref: '#/components/schemas/TeamRole'
        joinedAt:
          type: string
          format: date-time

    InvitationResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        email:
          type: string
        role:
          $ref: '#/components/schemas/TeamRole'
        status:
          $ref: '#/components/schemas/InvitationStatus'
        invitedByName:
          type: string
        expiresAt:
          type: string
          format: date-time
        createdAt:
          type: string
          format: date-time

    # --------------------------------------------------------
    # Project Request DTOs
    # --------------------------------------------------------
    CreateProjectRequest:
      type: object
      required: [name]
      properties:
        name:
          type: string
          maxLength: 200
        description:
          type: string
          maxLength: 5000
        githubConnectionId:
          type: string
          format: uuid
        repoUrl:
          type: string
          maxLength: 2000
        repoFullName:
          type: string
          maxLength: 200
        defaultBranch:
          type: string
          maxLength: 200
        jiraConnectionId:
          type: string
          format: uuid
        jiraProjectKey:
          type: string
          maxLength: 50
        jiraDefaultIssueType:
          type: string
          maxLength: 200
        jiraLabels:
          type: array
          maxItems: 100
          items:
            type: string
        jiraComponent:
          type: string
          maxLength: 200
        techStack:
          type: string
          maxLength: 5000

    UpdateProjectRequest:
      type: object
      properties:
        name:
          type: string
          maxLength: 200
        description:
          type: string
          maxLength: 5000
        githubConnectionId:
          type: string
          format: uuid
        repoUrl:
          type: string
          maxLength: 2000
        repoFullName:
          type: string
          maxLength: 200
        defaultBranch:
          type: string
          maxLength: 200
        jiraConnectionId:
          type: string
          format: uuid
        jiraProjectKey:
          type: string
          maxLength: 50
        jiraDefaultIssueType:
          type: string
          maxLength: 200
        jiraLabels:
          type: array
          maxItems: 100
          items:
            type: string
        jiraComponent:
          type: string
          maxLength: 200
        techStack:
          type: string
          maxLength: 5000
        isArchived:
          type: boolean

    # --------------------------------------------------------
    # Project Response DTOs
    # --------------------------------------------------------
    ProjectResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        teamId:
          type: string
          format: uuid
        name:
          type: string
        description:
          type: string
        githubConnectionId:
          type: string
          format: uuid
        repoUrl:
          type: string
        repoFullName:
          type: string
        defaultBranch:
          type: string
        jiraConnectionId:
          type: string
          format: uuid
        jiraProjectKey:
          type: string
        jiraDefaultIssueType:
          type: string
        jiraLabels:
          type: array
          items:
            type: string
        jiraComponent:
          type: string
        techStack:
          type: string
        healthScore:
          type: integer
          format: int32
        lastAuditAt:
          type: string
          format: date-time
        isArchived:
          type: boolean
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    # --------------------------------------------------------
    # Job Request DTOs
    # --------------------------------------------------------
    CreateJobRequest:
      type: object
      required: [projectId, mode]
      properties:
        projectId:
          type: string
          format: uuid
        mode:
          $ref: '#/components/schemas/JobMode'
        name:
          type: string
          maxLength: 200
        branch:
          type: string
          maxLength: 200
        configJson:
          type: string
          maxLength: 50000
        jiraTicketKey:
          type: string
          maxLength: 200

    UpdateJobRequest:
      type: object
      properties:
        status:
          $ref: '#/components/schemas/JobStatus'
        summaryMd:
          type: string
          maxLength: 50000
        overallResult:
          $ref: '#/components/schemas/JobResult'
        healthScore:
          type: integer
          format: int32
        totalFindings:
          type: integer
          format: int32
        criticalCount:
          type: integer
          format: int32
        highCount:
          type: integer
          format: int32
        mediumCount:
          type: integer
          format: int32
        lowCount:
          type: integer
          format: int32
        completedAt:
          type: string
          format: date-time
        startedAt:
          type: string
          format: date-time

    # --------------------------------------------------------
    # Job Response DTOs
    # --------------------------------------------------------
    JobResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        projectId:
          type: string
          format: uuid
        projectName:
          type: string
        mode:
          $ref: '#/components/schemas/JobMode'
        status:
          $ref: '#/components/schemas/JobStatus'
        name:
          type: string
        branch:
          type: string
        configJson:
          type: string
        summaryMd:
          type: string
        overallResult:
          $ref: '#/components/schemas/JobResult'
        healthScore:
          type: integer
          format: int32
        totalFindings:
          type: integer
          format: int32
        criticalCount:
          type: integer
          format: int32
        highCount:
          type: integer
          format: int32
        mediumCount:
          type: integer
          format: int32
        lowCount:
          type: integer
          format: int32
        jiraTicketKey:
          type: string
        startedBy:
          type: string
          format: uuid
        startedByName:
          type: string
        startedAt:
          type: string
          format: date-time
        completedAt:
          type: string
          format: date-time
        createdAt:
          type: string
          format: date-time

    JobSummaryResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        projectName:
          type: string
        mode:
          $ref: '#/components/schemas/JobMode'
        status:
          $ref: '#/components/schemas/JobStatus'
        name:
          type: string
        overallResult:
          $ref: '#/components/schemas/JobResult'
        healthScore:
          type: integer
          format: int32
        totalFindings:
          type: integer
          format: int32
        criticalCount:
          type: integer
          format: int32
        completedAt:
          type: string
          format: date-time
        createdAt:
          type: string
          format: date-time

    # --------------------------------------------------------
    # Agent Run Request DTOs
    # --------------------------------------------------------
    CreateAgentRunRequest:
      type: object
      required: [jobId, agentType]
      properties:
        jobId:
          type: string
          format: uuid
        agentType:
          $ref: '#/components/schemas/AgentType'

    UpdateAgentRunRequest:
      type: object
      properties:
        status:
          $ref: '#/components/schemas/AgentStatus'
        result:
          $ref: '#/components/schemas/AgentResult'
        reportS3Key:
          type: string
          maxLength: 1000
        score:
          type: integer
          format: int32
        findingsCount:
          type: integer
          format: int32
        criticalCount:
          type: integer
          format: int32
        highCount:
          type: integer
          format: int32
        completedAt:
          type: string
          format: date-time
        startedAt:
          type: string
          format: date-time

    # --------------------------------------------------------
    # Agent Run Response DTOs
    # --------------------------------------------------------
    AgentRunResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        jobId:
          type: string
          format: uuid
        agentType:
          $ref: '#/components/schemas/AgentType'
        status:
          $ref: '#/components/schemas/AgentStatus'
        result:
          $ref: '#/components/schemas/AgentResult'
        reportS3Key:
          type: string
        score:
          type: integer
          format: int32
        findingsCount:
          type: integer
          format: int32
        criticalCount:
          type: integer
          format: int32
        highCount:
          type: integer
          format: int32
        startedAt:
          type: string
          format: date-time
        completedAt:
          type: string
          format: date-time

    # --------------------------------------------------------
    # Bug Investigation Request DTOs
    # --------------------------------------------------------
    CreateBugInvestigationRequest:
      type: object
      required: [jobId]
      properties:
        jobId:
          type: string
          format: uuid
        jiraKey:
          type: string
          maxLength: 200
        jiraSummary:
          type: string
          maxLength: 500
        jiraDescription:
          type: string
          maxLength: 50000
        jiraCommentsJson:
          type: string
          maxLength: 50000
        jiraAttachmentsJson:
          type: string
          maxLength: 50000
        jiraLinkedIssues:
          type: string
          maxLength: 50000
        additionalContext:
          type: string
          maxLength: 50000

    UpdateBugInvestigationRequest:
      type: object
      properties:
        rcaMd:
          type: string
          maxLength: 50000
        impactAssessmentMd:
          type: string
          maxLength: 50000
        rcaS3Key:
          type: string
          maxLength: 1000
        rcaPostedToJira:
          type: boolean
        fixTasksCreatedInJira:
          type: boolean

    # --------------------------------------------------------
    # Bug Investigation Response DTOs
    # --------------------------------------------------------
    BugInvestigationResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        jobId:
          type: string
          format: uuid
        jiraKey:
          type: string
        jiraSummary:
          type: string
        jiraDescription:
          type: string
        additionalContext:
          type: string
        rcaMd:
          type: string
        impactAssessmentMd:
          type: string
        rcaS3Key:
          type: string
        rcaPostedToJira:
          type: boolean
        fixTasksCreatedInJira:
          type: boolean
        createdAt:
          type: string
          format: date-time

    # --------------------------------------------------------
    # Finding Request DTOs
    # --------------------------------------------------------
    CreateFindingRequest:
      type: object
      required: [jobId, agentType, severity, title]
      properties:
        jobId:
          type: string
          format: uuid
        agentType:
          $ref: '#/components/schemas/AgentType'
        severity:
          $ref: '#/components/schemas/Severity'
        title:
          type: string
          maxLength: 500
        description:
          type: string
          maxLength: 5000
        filePath:
          type: string
          maxLength: 1000
        lineNumber:
          type: integer
          format: int32
        recommendation:
          type: string
          maxLength: 5000
        evidence:
          type: string
          maxLength: 50000
        effortEstimate:
          $ref: '#/components/schemas/Effort'
        debtCategory:
          $ref: '#/components/schemas/DebtCategory'

    UpdateFindingStatusRequest:
      type: object
      required: [status]
      properties:
        status:
          $ref: '#/components/schemas/FindingStatus'

    BulkUpdateFindingsRequest:
      type: object
      required: [findingIds, status]
      properties:
        findingIds:
          type: array
          minItems: 1
          maxItems: 100
          items:
            type: string
            format: uuid
        status:
          $ref: '#/components/schemas/FindingStatus'

    # --------------------------------------------------------
    # Finding Response DTOs
    # --------------------------------------------------------
    FindingResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        jobId:
          type: string
          format: uuid
        agentType:
          $ref: '#/components/schemas/AgentType'
        severity:
          $ref: '#/components/schemas/Severity'
        title:
          type: string
        description:
          type: string
        filePath:
          type: string
        lineNumber:
          type: integer
          format: int32
        recommendation:
          type: string
        evidence:
          type: string
        effortEstimate:
          $ref: '#/components/schemas/Effort'
        debtCategory:
          $ref: '#/components/schemas/DebtCategory'
        status:
          $ref: '#/components/schemas/FindingStatus'
        statusChangedBy:
          type: string
          format: uuid
        statusChangedAt:
          type: string
          format: date-time
        createdAt:
          type: string
          format: date-time

    # --------------------------------------------------------
    # Compliance Request DTOs
    # --------------------------------------------------------
    CreateSpecificationRequest:
      type: object
      required: [jobId, name, s3Key]
      properties:
        jobId:
          type: string
          format: uuid
        name:
          type: string
          maxLength: 200
        specType:
          $ref: '#/components/schemas/SpecType'
        s3Key:
          type: string
          maxLength: 1000

    CreateComplianceItemRequest:
      type: object
      required: [jobId, requirement, status]
      properties:
        jobId:
          type: string
          format: uuid
        requirement:
          type: string
          maxLength: 5000
        specId:
          type: string
          format: uuid
        status:
          $ref: '#/components/schemas/ComplianceStatus'
        evidence:
          type: string
          maxLength: 50000
        agentType:
          $ref: '#/components/schemas/AgentType'
        notes:
          type: string
          maxLength: 5000

    # --------------------------------------------------------
    # Compliance Response DTOs
    # --------------------------------------------------------
    SpecificationResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        jobId:
          type: string
          format: uuid
        name:
          type: string
        specType:
          $ref: '#/components/schemas/SpecType'
        s3Key:
          type: string
        createdAt:
          type: string
          format: date-time

    ComplianceItemResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        jobId:
          type: string
          format: uuid
        requirement:
          type: string
        specId:
          type: string
          format: uuid
        specName:
          type: string
        status:
          $ref: '#/components/schemas/ComplianceStatus'
        evidence:
          type: string
        agentType:
          $ref: '#/components/schemas/AgentType'
        notes:
          type: string
        createdAt:
          type: string
          format: date-time

    # --------------------------------------------------------
    # Dependency Scan Request DTOs
    # --------------------------------------------------------
    CreateDependencyScanRequest:
      type: object
      required: [projectId]
      properties:
        projectId:
          type: string
          format: uuid
        jobId:
          type: string
          format: uuid
        manifestFile:
          type: string
          maxLength: 200
        totalDependencies:
          type: integer
          format: int32
        outdatedCount:
          type: integer
          format: int32
        vulnerableCount:
          type: integer
          format: int32
        scanDataJson:
          type: string
          maxLength: 50000

    CreateVulnerabilityRequest:
      type: object
      required: [scanId, dependencyName, severity]
      properties:
        scanId:
          type: string
          format: uuid
        dependencyName:
          type: string
          maxLength: 200
        currentVersion:
          type: string
          maxLength: 50
        fixedVersion:
          type: string
          maxLength: 50
        cveId:
          type: string
          maxLength: 50
        severity:
          $ref: '#/components/schemas/Severity'
        description:
          type: string
          maxLength: 5000

    # --------------------------------------------------------
    # Dependency Scan Response DTOs
    # --------------------------------------------------------
    DependencyScanResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        projectId:
          type: string
          format: uuid
        jobId:
          type: string
          format: uuid
        manifestFile:
          type: string
        totalDependencies:
          type: integer
          format: int32
        outdatedCount:
          type: integer
          format: int32
        vulnerableCount:
          type: integer
          format: int32
        createdAt:
          type: string
          format: date-time

    VulnerabilityResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        scanId:
          type: string
          format: uuid
        dependencyName:
          type: string
        currentVersion:
          type: string
        fixedVersion:
          type: string
        cveId:
          type: string
        severity:
          $ref: '#/components/schemas/Severity'
        description:
          type: string
        status:
          $ref: '#/components/schemas/VulnerabilityStatus'
        createdAt:
          type: string
          format: date-time

    # --------------------------------------------------------
    # Directive Request DTOs
    # --------------------------------------------------------
    CreateDirectiveRequest:
      type: object
      required: [name, contentMd, scope]
      properties:
        name:
          type: string
          maxLength: 200
        description:
          type: string
          maxLength: 5000
        contentMd:
          type: string
          maxLength: 50000
        category:
          $ref: '#/components/schemas/DirectiveCategory'
        scope:
          $ref: '#/components/schemas/DirectiveScope'
        teamId:
          type: string
          format: uuid
        projectId:
          type: string
          format: uuid

    UpdateDirectiveRequest:
      type: object
      properties:
        name:
          type: string
          maxLength: 200
        description:
          type: string
          maxLength: 5000
        contentMd:
          type: string
          maxLength: 50000
        category:
          $ref: '#/components/schemas/DirectiveCategory'

    AssignDirectiveRequest:
      type: object
      required: [projectId, directiveId]
      properties:
        projectId:
          type: string
          format: uuid
        directiveId:
          type: string
          format: uuid
        enabled:
          type: boolean

    # --------------------------------------------------------
    # Directive Response DTOs
    # --------------------------------------------------------
    DirectiveResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        description:
          type: string
        contentMd:
          type: string
        category:
          $ref: '#/components/schemas/DirectiveCategory'
        scope:
          $ref: '#/components/schemas/DirectiveScope'
        teamId:
          type: string
          format: uuid
        projectId:
          type: string
          format: uuid
        createdBy:
          type: string
          format: uuid
        createdByName:
          type: string
        version:
          type: integer
          format: int32
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    ProjectDirectiveResponse:
      type: object
      properties:
        projectId:
          type: string
          format: uuid
        directiveId:
          type: string
          format: uuid
        directiveName:
          type: string
        category:
          $ref: '#/components/schemas/DirectiveCategory'
        enabled:
          type: boolean

    # --------------------------------------------------------
    # Health Monitor Request DTOs
    # --------------------------------------------------------
    CreateHealthScheduleRequest:
      type: object
      required: [projectId, scheduleType, agentTypes]
      properties:
        projectId:
          type: string
          format: uuid
        scheduleType:
          $ref: '#/components/schemas/ScheduleType'
        cronExpression:
          type: string
          maxLength: 200
        agentTypes:
          type: array
          minItems: 1
          maxItems: 20
          items:
            $ref: '#/components/schemas/AgentType'

    CreateHealthSnapshotRequest:
      type: object
      required: [projectId, healthScore]
      properties:
        projectId:
          type: string
          format: uuid
        jobId:
          type: string
          format: uuid
        healthScore:
          type: integer
          format: int32
        findingsBySeverity:
          type: string
          maxLength: 5000
        techDebtScore:
          type: integer
          format: int32
        dependencyScore:
          type: integer
          format: int32
        testCoveragePercent:
          type: number

    # --------------------------------------------------------
    # Health Monitor Response DTOs
    # --------------------------------------------------------
    HealthScheduleResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        projectId:
          type: string
          format: uuid
        scheduleType:
          $ref: '#/components/schemas/ScheduleType'
        cronExpression:
          type: string
        agentTypes:
          type: array
          items:
            $ref: '#/components/schemas/AgentType'
        isActive:
          type: boolean
        lastRunAt:
          type: string
          format: date-time
        nextRunAt:
          type: string
          format: date-time
        createdAt:
          type: string
          format: date-time

    HealthSnapshotResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        projectId:
          type: string
          format: uuid
        jobId:
          type: string
          format: uuid
        healthScore:
          type: integer
          format: int32
        findingsBySeverity:
          type: string
        techDebtScore:
          type: integer
          format: int32
        dependencyScore:
          type: integer
          format: int32
        testCoveragePercent:
          type: number
        capturedAt:
          type: string
          format: date-time

    # --------------------------------------------------------
    # Integration Request DTOs
    # --------------------------------------------------------
    CreateGitHubConnectionRequest:
      type: object
      required: [name, authType, credentials]
      properties:
        name:
          type: string
          maxLength: 100
        authType:
          $ref: '#/components/schemas/GitHubAuthType'
        credentials:
          type: string
          maxLength: 10000
        githubUsername:
          type: string
          maxLength: 200

    CreateJiraConnectionRequest:
      type: object
      required: [name, instanceUrl, email, apiToken]
      properties:
        name:
          type: string
          maxLength: 100
        instanceUrl:
          type: string
          maxLength: 500
        email:
          type: string
          format: email
        apiToken:
          type: string
          maxLength: 10000

    # --------------------------------------------------------
    # Integration Response DTOs
    # --------------------------------------------------------
    GitHubConnectionResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        teamId:
          type: string
          format: uuid
        name:
          type: string
        authType:
          $ref: '#/components/schemas/GitHubAuthType'
        githubUsername:
          type: string
        isActive:
          type: boolean
        createdAt:
          type: string
          format: date-time

    JiraConnectionResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        teamId:
          type: string
          format: uuid
        name:
          type: string
        instanceUrl:
          type: string
        email:
          type: string
        isActive:
          type: boolean
        createdAt:
          type: string
          format: date-time

    # --------------------------------------------------------
    # Persona Request DTOs
    # --------------------------------------------------------
    CreatePersonaRequest:
      type: object
      required: [name, contentMd, scope]
      properties:
        name:
          type: string
          maxLength: 100
        agentType:
          $ref: '#/components/schemas/AgentType'
        description:
          type: string
          maxLength: 5000
        contentMd:
          type: string
          maxLength: 50000
        scope:
          $ref: '#/components/schemas/Scope'
        teamId:
          type: string
          format: uuid
        isDefault:
          type: boolean

    UpdatePersonaRequest:
      type: object
      properties:
        name:
          type: string
          maxLength: 100
        description:
          type: string
          maxLength: 5000
        contentMd:
          type: string
          maxLength: 50000
        isDefault:
          type: boolean

    # --------------------------------------------------------
    # Persona Response DTOs
    # --------------------------------------------------------
    PersonaResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        agentType:
          $ref: '#/components/schemas/AgentType'
        description:
          type: string
        contentMd:
          type: string
        scope:
          $ref: '#/components/schemas/Scope'
        teamId:
          type: string
          format: uuid
        createdBy:
          type: string
          format: uuid
        createdByName:
          type: string
        isDefault:
          type: boolean
        version:
          type: integer
          format: int32
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    # --------------------------------------------------------
    # Task Request DTOs
    # --------------------------------------------------------
    CreateTaskRequest:
      type: object
      required: [jobId, taskNumber, title]
      properties:
        jobId:
          type: string
          format: uuid
        taskNumber:
          type: integer
          format: int32
        title:
          type: string
          maxLength: 500
        description:
          type: string
          maxLength: 5000
        promptMd:
          type: string
          maxLength: 50000
        promptS3Key:
          type: string
          maxLength: 1000
        findingIds:
          type: array
          maxItems: 100
          items:
            type: string
            format: uuid
        priority:
          $ref: '#/components/schemas/Priority'

    UpdateTaskRequest:
      type: object
      properties:
        status:
          $ref: '#/components/schemas/TaskStatus'
        assignedTo:
          type: string
          format: uuid
        jiraKey:
          type: string
          maxLength: 200

    # --------------------------------------------------------
    # Task Response DTOs
    # --------------------------------------------------------
    TaskResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        jobId:
          type: string
          format: uuid
        taskNumber:
          type: integer
          format: int32
        title:
          type: string
        description:
          type: string
        promptMd:
          type: string
        promptS3Key:
          type: string
        findingIds:
          type: array
          items:
            type: string
            format: uuid
        priority:
          $ref: '#/components/schemas/Priority'
        status:
          $ref: '#/components/schemas/TaskStatus'
        assignedTo:
          type: string
          format: uuid
        assignedToName:
          type: string
        jiraKey:
          type: string
        createdAt:
          type: string
          format: date-time

    # --------------------------------------------------------
    # Tech Debt Request DTOs
    # --------------------------------------------------------
    CreateTechDebtItemRequest:
      type: object
      required: [projectId, category, title]
      properties:
        projectId:
          type: string
          format: uuid
        category:
          $ref: '#/components/schemas/DebtCategory'
        title:
          type: string
          maxLength: 500
        description:
          type: string
          maxLength: 5000
        filePath:
          type: string
          maxLength: 1000
        effortEstimate:
          $ref: '#/components/schemas/Effort'
        businessImpact:
          $ref: '#/components/schemas/BusinessImpact'
        firstDetectedJobId:
          type: string
          format: uuid

    UpdateTechDebtStatusRequest:
      type: object
      required: [status]
      properties:
        status:
          $ref: '#/components/schemas/DebtStatus'
        resolvedJobId:
          type: string
          format: uuid

    # --------------------------------------------------------
    # Tech Debt Response DTOs
    # --------------------------------------------------------
    TechDebtItemResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        projectId:
          type: string
          format: uuid
        category:
          $ref: '#/components/schemas/DebtCategory'
        title:
          type: string
        description:
          type: string
        filePath:
          type: string
        effortEstimate:
          $ref: '#/components/schemas/Effort'
        businessImpact:
          $ref: '#/components/schemas/BusinessImpact'
        status:
          $ref: '#/components/schemas/DebtStatus'
        firstDetectedJobId:
          type: string
          format: uuid
        resolvedJobId:
          type: string
          format: uuid
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    # --------------------------------------------------------
    # User Request DTOs
    # --------------------------------------------------------
    UpdateUserRequest:
      type: object
      properties:
        displayName:
          type: string
          maxLength: 100
        avatarUrl:
          type: string
          maxLength: 500

    # --------------------------------------------------------
    # User Response DTOs
    # --------------------------------------------------------
    UserResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        email:
          type: string
        displayName:
          type: string
        avatarUrl:
          type: string
        isActive:
          type: boolean
        lastLoginAt:
          type: string
          format: date-time
        createdAt:
          type: string
          format: date-time
        mfaEnabled:
          type: boolean
        mfaMethod:
          type: string

    # --------------------------------------------------------
    # Metrics Response DTOs
    # --------------------------------------------------------
    ProjectMetricsResponse:
      type: object
      properties:
        projectId:
          type: string
          format: uuid
        projectName:
          type: string
        currentHealthScore:
          type: integer
          format: int32
        previousHealthScore:
          type: integer
          format: int32
        totalJobs:
          type: integer
          format: int32
        totalFindings:
          type: integer
          format: int32
        openCritical:
          type: integer
          format: int32
        openHigh:
          type: integer
          format: int32
        techDebtItemCount:
          type: integer
          format: int32
        openVulnerabilities:
          type: integer
          format: int32
        lastAuditAt:
          type: string
          format: date-time

    TeamMetricsResponse:
      type: object
      properties:
        teamId:
          type: string
          format: uuid
        totalProjects:
          type: integer
          format: int32
        totalJobs:
          type: integer
          format: int32
        totalFindings:
          type: integer
          format: int32
        averageHealthScore:
          type: number
          format: double
        projectsBelowThreshold:
          type: integer
          format: int32
        openCriticalFindings:
          type: integer
          format: int32

    # --------------------------------------------------------
    # Paginated Response Wrappers
    # --------------------------------------------------------
    PageResponseUserResponse:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/UserResponse'
        page:
          type: integer
          format: int32
        size:
          type: integer
          format: int32
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
          format: int32
        isLast:
          type: boolean

    PageResponseAuditLogResponse:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/AuditLogResponse'
        page:
          type: integer
          format: int32
        size:
          type: integer
          format: int32
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
          format: int32
        isLast:
          type: boolean

    PageResponseSpecificationResponse:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/SpecificationResponse'
        page:
          type: integer
          format: int32
        size:
          type: integer
          format: int32
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
          format: int32
        isLast:
          type: boolean

    PageResponseComplianceItemResponse:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/ComplianceItemResponse'
        page:
          type: integer
          format: int32
        size:
          type: integer
          format: int32
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
          format: int32
        isLast:
          type: boolean

    PageResponseDependencyScanResponse:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/DependencyScanResponse'
        page:
          type: integer
          format: int32
        size:
          type: integer
          format: int32
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
          format: int32
        isLast:
          type: boolean

    PageResponseVulnerabilityResponse:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/VulnerabilityResponse'
        page:
          type: integer
          format: int32
        size:
          type: integer
          format: int32
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
          format: int32
        isLast:
          type: boolean

    PageResponseFindingResponse:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/FindingResponse'
        page:
          type: integer
          format: int32
        size:
          type: integer
          format: int32
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
          format: int32
        isLast:
          type: boolean

    PageResponseHealthSnapshotResponse:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/HealthSnapshotResponse'
        page:
          type: integer
          format: int32
        size:
          type: integer
          format: int32
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
          format: int32
        isLast:
          type: boolean

    PageResponseJobSummaryResponse:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/JobSummaryResponse'
        page:
          type: integer
          format: int32
        size:
          type: integer
          format: int32
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
          format: int32
        isLast:
          type: boolean

    PageResponsePersonaResponse:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/PersonaResponse'
        page:
          type: integer
          format: int32
        size:
          type: integer
          format: int32
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
          format: int32
        isLast:
          type: boolean

    PageResponseProjectResponse:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/ProjectResponse'
        page:
          type: integer
          format: int32
        size:
          type: integer
          format: int32
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
          format: int32
        isLast:
          type: boolean

    PageResponseTaskResponse:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/TaskResponse'
        page:
          type: integer
          format: int32
        size:
          type: integer
          format: int32
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
          format: int32
        isLast:
          type: boolean

    PageResponseTechDebtItemResponse:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/TechDebtItemResponse'
        page:
          type: integer
          format: int32
        size:
          type: integer
          format: int32
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
          format: int32
        isLast:
          type: boolean
